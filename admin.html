<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>pro.stevenewton.me</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css" />
  <!-- Google Fonts Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
  <!-- MDB core CSS -->
  <link rel="stylesheet" href="css/mdb.min.css" />
  <!-- Custom styles -->
  <link rel="stylesheet" href="css/admin.css" />

  <!-- Chart.js -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"
    integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw=="
    crossorigin="anonymous">
  </script>
</head>

<body>
  <!--Main Navigation-->
  <header>
    <!-- Sidebar -->
    <nav id="sidebarMenu" class="collapse d-lg-block sidebar collapse bg-white">
      <div class="position-sticky">
        <div class="list-group list-group-flush mx-3 mt-4">
          <!-- Link to "Main Dashboard" -->
          <a
            href="#"
            class="list-group-item list-group-item-action py-2 active"
            data-mdb-ripple-init
            data-target="main-dashboard-section"
            aria-current="true"
          >
            <i class="fas fa-tachometer-alt fa-fw me-3"></i>
            <span>Main dashboard</span>
          </a>

          <!-- Link to "Website Traffic" -->
          <a
            href="#"
            class="list-group-item list-group-item-action py-2"
            data-mdb-ripple-init
            data-target="website-traffic-section"
          >
            <i class="fas fa-chart-area fa-fw me-3"></i>
            <span>Website traffic</span>
          </a>

          <!-- Link to "tkAuto Banner" -->
          <a
            href="#"
            class="list-group-item list-group-item-action py-2"
            data-mdb-ripple-init
            data-target="tkAutoBanner-section"
          >
            <i class="fas fa-lock fa-fw me-3"></i>
            <span>tkAuto Banner</span>
          </a>

          <!-- Link to "Tiles" -->
          <a
            href="#"
            class="list-group-item list-group-item-action py-2"
            data-mdb-ripple-init
            data-target="tiles-section"
          >
            <i class="fas fa-chart-line fa-fw me-3"></i>
            <span>Tiles</span>
          </a>

          <!-- Link to "Modals" -->
          <a
            href="#"
            class="list-group-item list-group-item-action py-2"
            data-mdb-ripple-init
            data-target="modals-section"
          >
            <i class="fas fa-chart-pie fa-fw me-3"></i>
            <span>Modals</span>
          </a>

          <!-- Link to "tkAuto Fare" -->
          <a
            href="#"
            class="list-group-item list-group-item-action py-2"
            data-mdb-ripple-init
            data-target="tkAutoFare-section"
          >
            <i class="fas fa-chart-pie fa-fw me-3"></i>
            <span>tkAuto Fare</span>
          </a>

          <!-- Link to "7Button" -->
          <a
            href="#"
            class="list-group-item list-group-item-action py-2"
            data-mdb-ripple-init
            data-target="7Button-section"
          >
            <i class="fas fa-chart-pie fa-fw me-3"></i>
            <span>7Button</span>
          </a>

          <!-- Link to "8Button" -->
          <a
            href="#"
            class="list-group-item list-group-item-action py-2"
            data-mdb-ripple-init
            data-target="8Button-section"
          >
            <i class="fas fa-chart-pie fa-fw me-3"></i>
            <span>8 Button</span>
          </a>
        </div>
      </div>
    </nav>
    <!-- Sidebar -->

    <!-- Navbar -->
    <nav id="main-navbar" class="navbar navbar-expand-lg navbar-light bg-white fixed-top">
      <div class="container-fluid">
        <!-- Toggle button -->
        <button
          class="navbar-toggler"
          type="button"
          data-mdb-collapse-init
          data-mdb-target="#sidebarMenu"
          aria-controls="sidebarMenu"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <i class="fas fa-bars"></i>
        </button>

        <!-- Brand -->
        <a class="navbar-brand" href="#">
          <img
            src="img/srn.png"
            height="25"
            alt=""
            loading="lazy"
          />
        </a>

        <!-- Search form -->
        <form class="d-none d-md-flex input-group w-auto my-auto">
          <input
            autocomplete="off"
            type="search"
            class="form-control rounded"
            placeholder='Search (ctrl + "/" to focus)'
            style="min-width: 225px"
          />
          <span class="input-group-text border-0">
            <i class="fas fa-search"></i>
          </span>
        </form>

        <!-- Right links -->
        <ul class="navbar-nav ms-auto d-flex flex-row">
          <!-- Notification dropdown -->
          <li class="nav-item dropdown">
            <a
              class="nav-link me-3 me-lg-0 dropdown-toggle hidden-arrow"
              href="#"
              id="navbarDropdownMenuLink"
              role="button"
              data-mdb-dropdown-init
              aria-expanded="false"
            >
              <i class="fas fa-bell"></i>
              <span class="badge rounded-pill badge-notification bg-danger">1</span>
            </a>
            <ul
              class="dropdown-menu dropdown-menu-end"
              aria-labelledby="navbarDropdownMenuLink"
            >
              <li><a class="dropdown-item" href="#">Welcome to pro.sn!</a></li>
              <li><a class="dropdown-item" href="#">System is running smoothly</a></li>
            </ul>
          </li>

          <!-- User info and logout -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle hidden-arrow d-flex align-items-center"
              href="#"
              id="userDropdown"
              role="button"
              data-mdb-dropdown-init
              aria-expanded="false"
            >
              <i class="fas fa-user-circle me-2"></i>
              <span id="userDisplayName">User</span>
            </a>
            <ul
              class="dropdown-menu dropdown-menu-end"
              aria-labelledby="userDropdown"
            >
              <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>My profile</a></li>
              <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>Settings</a></li>
              <li><hr class="dropdown-divider" /></li>
              <li><a class="dropdown-item" href="#" id="logoutBtn"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
  </header>

  <!--Main layout-->
  <main style="margin-top: 58px">
    <div class="container pt-4">
      <!-- =========================================
           MAIN DASHBOARD SECTION
      ========================================== -->
      <section id="main-dashboard-section">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2>Main Dashboard</h2>
          <div class="text-muted">
            Welcome back, <span id="welcomeUserName">User</span>!
          </div>
        </div>

        <!-- User Info Card -->
        <div class="row mb-4">
          <div class="col-12">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title"><i class="fas fa-user me-2"></i>Account Information</h5>
                <div class="row">
                  <div class="col-md-6">
                    <p><strong>Email:</strong> <span id="userEmail">Loading...</span></p>
                    <p><strong>User ID:</strong> <span id="userId">Loading...</span></p>
                  </div>
                  <div class="col-md-6">
                    <p><strong>Account Created:</strong> <span id="userCreatedAt">Loading...</span></p>
                    <p><strong>Last Sign In:</strong> <span id="lastSignIn">Loading...</span></p>
                  </div>
                </div>
                <div class="mt-3">
                  <span class="badge bg-success"><i class="fas fa-check me-1"></i>Account Active</span>
                  <span class="badge bg-info ms-2"><i class="fas fa-shield-alt me-1"></i>Email Verified</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Stats Cards -->
        <div class="row mb-4">
          <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
              <div class="card-body">
                <div class="row no-gutters align-items-center">
                  <div class="col mr-2">
                    <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Total Projects</div>
                    <div class="h5 mb-0 font-weight-bold text-gray-800">8</div>
                  </div>
                  <div class="col-auto">
                    <i class="fas fa-project-diagram fa-2x text-gray-300"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100 py-2">
              <div class="card-body">
                <div class="row no-gutters align-items-center">
                  <div class="col mr-2">
                    <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Active Sessions</div>
                    <div class="h5 mb-0 font-weight-bold text-gray-800">1</div>
                  </div>
                  <div class="col-auto">
                    <i class="fas fa-plug fa-2x text-gray-300"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-2">
              <div class="card-body">
                <div class="row no-gutters align-items-center">
                  <div class="col mr-2">
                    <div class="text-xs font-weight-bold text-info text-uppercase mb-1">System Status</div>
                    <div class="h5 mb-0 font-weight-bold text-gray-800">Online</div>
                  </div>
                  <div class="col-auto">
                    <i class="fas fa-server fa-2x text-gray-300"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
              <div class="card-body">
                <div class="row no-gutters align-items-center">
                  <div class="col mr-2">
                    <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Last Update</div>
                    <div class="h5 mb-0 font-weight-bold text-gray-800">Today</div>
                  </div>
                  <div class="col-auto">
                    <i class="fas fa-clock fa-2x text-gray-300"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Main chart block -->
        <div class="mb-4">
          <div class="card">
            <div class="card-header py-3">
              <h5 class="mb-0 text-center"><strong>Activity Overview</strong></h5>
            </div>
            <div class="card-body">
              <canvas class="my-4 w-100" id="myChart" height="380"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- =========================================
           OTHER SECTIONS (placeholder content)
      ========================================== -->
      <section id="website-traffic-section" style="display: none;">
        <h2><i class="fas fa-chart-area me-2"></i>Website Traffic</h2>
        <div class="card">
          <div class="card-body">
            <p>Website traffic analytics will be implemented here...</p>
            <div class="alert alert-info">
              <i class="fas fa-info-circle me-2"></i>
              Connect your analytics tools to view traffic data.
            </div>
          </div>
        </div>
      </section>

      <section id="tkAutoBanner-section" style="display: none;">
        <h2><i class="fas fa-lock me-2"></i>tkAuto Banner</h2>
        <div class="card">
          <div class="card-body">
            <p>tkAuto Banner management interface will be here...</p>
            <div class="alert alert-warning">
              <i class="fas fa-tools me-2"></i>
              Feature under development.
            </div>
          </div>
        </div>
      </section>

      <section id="tiles-section" style="display: none;">
        <h2><i class="fas fa-chart-line me-2"></i>Tiles</h2>
        <div class="card">
          <div class="card-body">
            <p>Tiles management interface will be here...</p>
            <div class="alert alert-warning">
              <i class="fas fa-tools me-2"></i>
              Feature under development.
            </div>
          </div>
        </div>
      </section>

      <section id="modals-section" style="display: none;">
        <h2><i class="fas fa-chart-pie me-2"></i>Modals</h2>
        <div class="card">
          <div class="card-body">
            <p>Modals management interface will be here...</p>
            <div class="alert alert-warning">
              <i class="fas fa-tools me-2"></i>
              Feature under development.
            </div>
          </div>
        </div>
      </section>

      <section id="tkAutoFare-section" style="display: none;">
        <h2><i class="fas fa-chart-pie me-2"></i>tkAuto Fare</h2>
        <div class="card">
          <div class="card-body">
            <p>tkAuto Fare management interface will be here...</p>
            <div class="alert alert-warning">
              <i class="fas fa-tools me-2"></i>
              Feature under development.
            </div>
          </div>
        </div>
      </section>

      <section id="7Button-section" style="display: none;">
        <h2><i class="fas fa-chart-pie me-2"></i>7Button</h2>
        <div class="card">
          <div class="card-body">
            <p>7Button management interface will be here...</p>
            <div class="alert alert-warning">
              <i class="fas fa-tools me-2"></i>
              Feature under development.
            </div>
          </div>
        </div>
      </section>

      <section id="8Button-section" style="display: none;">
        <h2><i class="fas fa-chart-pie me-2"></i>8Button</h2>
        <div class="card">
          <div class="card-body">
            <p>8Button management interface will be here...</p>
            <div class="alert alert-warning">
              <i class="fas fa-tools me-2"></i>
              Feature under development.
            </div>
          </div>
        </div>
      </section>

    </div><!-- .container -->
  </main>
  <!-- End Main layout-->

  <!-- MDB core JS -->
  <script type="text/javascript" src="js/mdb.umd.min.js"></script>
  <!-- Custom scripts -->
  <script type="text/javascript" src="js/admin.js"></script>
  
  <!-- Firebase and Authentication Scripts -->
  <script type="module">
    // Import Firebase functions
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { 
      getAuth, 
      onAuthStateChanged,
      signOut 
    } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

    // Your Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBddP6AW0CG6xyJ4r7_4q_ZZ_6mnH0kjsE",
      authDomain: "prosnme.firebaseapp.com",
      projectId: "prosnme",
      storageBucket: "prosnme.firebasestorage.app",
      messagingSenderId: "1043834100115",
      appId: "1:1043834100115:web:b760f6968c7998a0a3b066"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Check authentication on page load
    onAuthStateChanged(auth, (user) => {
      if (user) {
        // User is signed in, load their data
        loadUserData(user);
      } else {
        // No user is signed in, redirect to login
        window.location.href = 'index.html';
      }
    });

    function loadUserData(user) {
      // Update UI with user information
      const userEmail = user.email;
      const userId = user.uid;
      const displayName = user.displayName || userEmail.split('@')[0];
      const creationTime = user.metadata.creationTime;
      const lastSignInTime = user.metadata.lastSignInTime;

      // Update display elements
      document.getElementById('userEmail').textContent = userEmail;
      document.getElementById('userId').textContent = userId.substring(0, 8) + '...';
      document.getElementById('userDisplayName').textContent = displayName;
      document.getElementById('welcomeUserName').textContent = displayName;
      
      // Format dates
      if (creationTime) {
        const createdDate = new Date(creationTime);
        document.getElementById('userCreatedAt').textContent = createdDate.toLocaleDateString();
      }
      
      if (lastSignInTime) {
        const lastSignInDate = new Date(lastSignInTime);
        document.getElementById('lastSignIn').textContent = lastSignInDate.toLocaleString();
      }
    }

    // Logout functionality
    document.getElementById('logoutBtn').addEventListener('click', async (e) => {
      e.preventDefault();
      
      try {
        await signOut(auth);
        window.location.href = 'index.html';
      } catch (error) {
        console.error('Logout error:', error);
        alert('Error signing out. Please try again.');
      }
    });

    // Sample chart initialization
    document.addEventListener('DOMContentLoaded', function() {
      const chartElement = document.getElementById('myChart');
      if (chartElement) {
        const ctx = chartElement.getContext('2d');
        const myChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
            datasets: [{
              label: 'Activity',
              data: [12, 19, 8, 15, 25, 18, 12],
              lineTension: 0.1,
              backgroundColor: 'rgba(30, 60, 114, 0.1)',
              borderColor: 'rgba(30, 60, 114, 1)',
              borderWidth: 3,
              pointBackgroundColor: 'rgba(30, 60, 114, 1)',
              pointBorderColor: '#fff',
              pointBorderWidth: 2,
              pointRadius: 5
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              yAxes: [{
                ticks: {
                  beginAtZero: true
                }
              }]
            },
            legend: {
              display: true,
              position: 'top'
            },
            elements: {
              point: {
                hoverRadius: 8
              }
            }
          }
        });
      }
    });
  </script>

  <style>
    .border-left-primary {
      border-left: 0.25rem solid #4e73df !important;
    }
    .border-left-success {
      border-left: 0.25rem solid #1cc88a !important;
    }
    .border-left-info {
      border-left: 0.25rem solid #36b9cc !important;
    }
    .border-left-warning {
      border-left: 0.25rem solid #f6c23e !important;
    }
    .text-xs {
      font-size: 0.7rem;
    }
    .font-weight-bold {
      font-weight: 700 !important;
    }
    .text-uppercase {
      text-transform: uppercase !important;
    }
    .text-primary {
      color: #4e73df !important;
    }
    .text-success {
      color: #1cc88a !important;
    }
    .text-info {
      color: #36b9cc !important;
    }
    .text-warning {
      color: #f6c23e !important;
    }
    .text-gray-800 {
      color: #5a5c69 !important;
    }
    .text-gray-300 {
      color: #dddfeb !important;
    }
  </style>
</body>
</html>